#!/usr/bin/env ruby

require File.expand_path('../lib/trello', __dir__)

require 'trello'
require 'trello/web/application'

defaults = { '-h' => 'localhost',
             '-p' => 4567 }
options = ARGV.each_slice(2).reduce(defaults) { |m, (k, v)| m.merge(k => v) }

server = Rack::Handler.default
server.run(Trello::Web::Application.new,
           Host: options.fetch('-h'),
           Port: options.fetch('-p').to_i)
